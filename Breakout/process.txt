Мне дан ip адрес цели: 10.0.2.9

Иследование я начал со сканирования с помощью nmap (NmapFirstScan.*). Результаты сканирования:

Предполагаемая ОС: Linux 4.X|5.X
MAC адрес: 08:00:27:F9:52:FC (Oracle VirtualBox virtual NIC)

Открытые порты:
1. 80/tcp http 64 Apache httpd 2.4.51 ((Debian)):
	С помощью gobuster были найдены следующие директории (GoBusterFirstScanDir):
	/manual
	Скорее всего, это просто запущенный сервер

2. 139/tcp netbios-ssn Samba smbd 4.6.2:
	Samba smbd 4.6.2 находится в списке уязвимых к cve-2017-7494 (https://www.exploit-db.com/exploits/42084)
	Я не могу это использовать, так как нет некоторых нужных данных (cve20177494.png)

3. 445/tcp netbios-ssn Samba smbd 4.6.2

4. 10000/tcp http MiniServ 1.981 (Webmin httpd):
	На этом порту расположена форма для входа на сервер (port10000.png).

5. 20000/tcp http MiniServ 1.830 (Webmin httpd):
	На этом порту расположена форма для входа на сервер (port2000.png).

Это две разные формы для входа: 10000 -- Webmin, 20000 -- Usermin.
Для перечисления информации о samba я использовал инструмент enum4linux (Enum4linux.txt).
в процессе анализа результатов я нашел возможный логин -- cyber (user.png).


В коде страницы http://10.0.2.9:80/ в нижней части был спрятан комментарий (comment.png):

<!--
don't worry no one will get here, it's safe to share with you my access. Its encrypted :)

++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>++++++++++++++++.++++.>>+++++++++++++++++.----.<++++++++++.-----------.>-----------.++++.<<+.>-.--------.++++++++++++++++++++.<------------.>>---------.<<++++++.++++++.


p-->

Я расшифровал комментарий и получил запись: .2uqPEfj3D<P'a-3
Возможно, это пароль.

Используя приведенные выше данные, я смог войти в систему (entrance.png).
Далее идет анализ сайта.

Внизу сайта был найден значок терминала (terminal.png).Ура!!! Это терминал!!!
Пробую добавить реверс шелл.

Я получил реверс шелл!!! (reverseshell.png)

В пользовательской директории находился файл user.txt, в котором был первый флаг -- 
3mp!r3{You_Manage_To_Break_To_My_Secure_Access}.

Далее идет процесс повышения привелегий.
История пустая, команда sudo не найдена.
Я смог прочитать файл /etc/passwd (passwd), но не могу записывать.
Не могу читать файл /etc/shadow.

Биты suid найдены в следующих файлах:
/usr/bin/umount
/usr/bin/passwd
/usr/bin/su
/usr/bin/gpasswd
/usr/bin/mount
/usr/bin/fusermount
/usr/bin/newgrp
/usr/bin/chfn
/usr/bin/chsh
/usr/lib/openssh/ssh-keysign

Ни один из sticky битов я не могу использовать.

Версия ядра -- 5.10.0-9-amd64
ОС: debian


Версия ядра уязвима к эксплоиту DirtyPipe. На ель мною был переброшен проверщик, который проверил систему на уязвимость и постановил, что ядро уязвимо.
На уязвимой машине я написал скрипт client.py, который помогал мне перемещать файл с моей машины на уязвимую.
Перенес эксплоиты, но провалился в использовании.

я перебросил на цель linuxenum.sh и получил результаты (linuxwnum_results.txt).

В ходе анализа машины я нашел файл .old_pass.bak, но не мог его распакавать. Tar может помочь открыть файл, он имеет возможность чтения файлов.

./tar -cf pass.tar /var/backups/.old_pass.bak
tar -xf pass.tar 
cat /var/backups/.old_pass.bak

Эти команды помогли мне открыть файл.Я нашел пароль и получил root. В директории /root. находился флаг -- 
3mp!r3{You_Manage_To_BreakOut_From_My_System_Congratulation}


ТЕСТИРОВАНИЕ ОКОНЧЕНО!!!
